import{r as c,W as A,j as e,Y as E,y as f,a as o}from"./app-CeuI7o1v.js";import{A as R}from"./AlertCard-FIcKZ8Wp.js";import{C as T}from"./CardsWithSticky-wh3rbpCG.js";import{S as _}from"./SingleCardCenter-XpJrEUsc.js";import{D as l}from"./Dropdown-D43rT-fp.js";import{L,b as H}from"./Layout-DdaQygP1.js";import{F as I,a as W}from"./XCircleIcon-DKK-wTI2.js";import{F as Y,a as q}from"./XMarkIcon-CvHw8P_x.js";import{F as M}from"./EllipsisVerticalIcon-d6u5R_8n.js";import{F as g}from"./ChevronDownIcon-Bsu68qhy.js";import"./transition-lxKP8sxk.js";import"./PageHeader-e0GRXsHZ.js";import"./MegaphoneIcon-BRvYTP08.js";import"./close-provider-Chx4oZVL.js";function re({auth:j,paginated:i,searched:v=""}){const b={id:"",code:"",description:"",year:"1st",sem:"1st"},[t,d]=c.useState({id:"",code:"",description:"",year:"",sem:""}),[a,u]=c.useState(!1),[m,h]=c.useState(!1),[x,y]=c.useState(v),{data:n,setData:r,post:N,patch:w,errors:S,hasErrors:C,processing:$,reset:F,recentlySuccessful:D}=A({id:"",code:"",description:"",year:"1st",sem:"1st"}),k=s=>{s.preventDefault(),a?w(route("subjects.update",n.id),{preserveScroll:!0}):N(route("subjects.store"),{onSuccess:()=>F()})};return c.useEffect(()=>{console.log(i)},[]),e.jsxs(L,{isAdmin:j.isAdmin,user:j.user,icon:e.jsx(H,{className:"w-9 h-9 text-gray-500"}),headerTitle:"Subjects",headerSubtitle:"Admin Subjects",children:[e.jsx(E,{title:"Admin Subjects"}),e.jsx(T,{cards:e.jsx(_,{bodyPadding:"p-4",table:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-1/2 md:w-1/3 mb-4 relative",children:[e.jsx("input",{className:"form-control",placeholder:"Search Subject",type:"search",value:x,onKeyDown:s=>{s.key==="Enter"&&(console.log(x),f.visit(route("admin.subjects.search",x),{preserveScroll:!0}))},onChange:s=>{y(s.target.value)}}),x==""?e.jsx(I,{className:"absolute !-translate-y-2/4 !m-0 !top-2/4 right-3  w-8 h-8 text-gray-600"}):e.jsx(W,{onClick:()=>{f.visit(route("admin.subjects"))},className:"absolute !-translate-y-2/4 !m-0 !top-2/4 right-3  w-8 h-8 cursor-pointer"})]}),e.jsxs("div",{className:"table-responsive",children:[e.jsxs("table",{className:"datatable-table text-center relative",children:[m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute w-full h-full bg-black opacity-80 z-[8]"}),e.jsx(R,{type:"alert-warning",title:`Delete ${t.code}?`,message:"The subject will be deleted forever and any data related to it",actions:e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"border-none",as:"button",href:route("subjects.destroy",t.id),method:"delete",children:e.jsx(Y,{className:"h-6 w-6 hover:text-[#8b0d00]"})}),e.jsx(o,{className:"border-none",onClick:()=>{h(!1)},preserveScroll:!0,children:e.jsx(q,{className:"h-6 w-6 text-[#926100] hover:text-[#8b0d00]"})})]})})]}),e.jsx("thead",{children:e.jsxs("tr",{className:"card-header",children:[e.jsx("th",{children:"Instructor"}),e.jsx("th",{children:"Course"}),e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Year/Sem"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:i.data.map(s=>e.jsxs("tr",{className:`${s.user_id==null?"bg-red-100":""} ${s.id==t.id?"!bg-blue-100 !font-bold":""}`,children:[e.jsx("td",{children:s.instructor},s.user_id),e.jsx("td",{children:s.course}),e.jsx("td",{children:s.code}),e.jsx("td",{children:s.description}),e.jsxs("td",{children:[`${s.year}-${s.sem}`," "]}),e.jsx("td",{children:e.jsxs(l,{children:[e.jsx(l.Trigger,{children:e.jsx("button",{className:"rounded-[50%] hover:bg-gray-200 p-1",type:"button",children:e.jsx(M,{className:"w-5 h-5 text-black"})})}),e.jsxs(l.Content,{contentClasses:"flex flex-col gap-2 text-center !font-normal",margin:"mt-0",width:"w-auto",children:[e.jsx("button",{className:"hover:bg-green-50 ",onClick:()=>{a&&s.id!=t.id?(d(s),r(s)):!a&&t.id==""?(u(!0),d(s),r(s)):a&&s.id==t.id&&(u(!1),d(b),r(b)),m&&h(!1)},children:s.id==t.id?"Cancel":"Edit"}),e.jsx("button",{className:"hover:bg-green-50 ",onClick:()=>{s.id==t.id?h(!m):!a&&t.id==""&&(u(!0),d(s),r(s),h(!m))},children:"Delete"}),e.jsx(o,{className:"hover:bg-green-50 px-1",as:"button",href:route("schedules.view",s.id),children:"Schedules"})]})]})})]},s.id))})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between",children:[e.jsx("div",{children:e.jsxs("p",{children:["Current page: ",i.current_page]})}),e.jsx("div",{className:"flex flex-row",children:i.links.map((s,p)=>p==0||p==i.links.length-1?e.jsx(o,{dangerouslySetInnerHTML:{__html:p==0?"&laquo;":"&raquo;"},className:`flex flex-row p-2 h-8 items-center place-content-center ${s.url==null&&"text-gray-500"} ${s.active?"bg-[#044721] !border-[#044721] text-white":""}`,href:s.url,as:"button",preserveScroll:!0,disabled:s.url==null}):e.jsx(o,{dangerouslySetInnerHTML:{__html:s.label},className:`flex flex-row p-2 h-8 items-center place-content-center ${s.url==null&&"text-gray-500"} ${s.active?"bg-[#044721] !border-[#044721] text-white":""}`,href:s.url,as:"button",preserveScroll:!0,disabled:s.url==null}))})]})]})]})}),stickyNavHeader:"Subject Details",stickyNavBody:e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"small !text-[16px] mb-1",children:"Subject Code"}),e.jsx("input",{className:"form-control",type:"text",placeholder:"Subject Code",value:n.code,onChange:s=>{r("code",s.target.value)}})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"small !text-[16px] mb-1",children:"Description"}),e.jsx("input",{className:"form-control",id:"inputDescription",type:"text",placeholder:"Description",value:n.description,onChange:s=>{r("description",s.target.value)}})]}),e.jsxs("div",{className:"mb-3 flex flex-row text-center",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"small !text-[16px] mb-1",children:"Year"}),e.jsxs(l,{children:[e.jsx(l.Trigger,{children:e.jsxs("button",{className:"form-control text-start mr-1 relative",type:"button",children:[n.year,e.jsx(g,{className:"absolute -translate-y-2/4 top-2/4 right-3 w-5 h-5"})]})}),e.jsxs(l.Content,{margin:"mt-0",width:"w-full",children:[e.jsx("div",{onClick:()=>{r("year","1st")},className:"cursor-pointer py-2 hover:bg-green-50",children:"1st"}),e.jsx("div",{onClick:()=>{r("year","2nd")},className:"cursor-pointer py-2 hover:bg-green-50",children:"2nd"}),e.jsx("div",{onClick:()=>{r("year","3rd")},className:"cursor-pointer py-2 hover:bg-green-50",children:"3rd"}),e.jsx("div",{onClick:()=>{r("year","4th")},className:"cursor-pointer py-2 hover:bg-green-50",children:"4th"})]})]})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"small !text-[16px] mb-1",children:"Sem"}),e.jsxs(l,{children:[e.jsx(l.Trigger,{children:e.jsxs("button",{className:"form-control text-start ml-1 relative",type:"button",children:[n.sem,e.jsx(g,{className:"absolute -translate-y-2/4 top-2/4 right-3 w-5 h-5"})]})}),e.jsxs(l.Content,{margin:"mt-0",width:"w-full",children:[e.jsx("div",{onClick:()=>{r("sem","1st")},className:"cursor-pointer py-2 hover:bg-green-50",children:"1st"}),e.jsx("div",{onClick:()=>{r("sem","2nd")},className:"cursor-pointer py-2 hover:bg-green-50",children:"2nd"}),e.jsx("div",{onClick:()=>{r("sem","intersem")},className:"cursor-pointer py-2 hover:bg-green-50",children:"intersem"})]})]})]})]}),e.jsxs("div",{className:"flex flex-row",children:[e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:$,children:a?"Edit":"Add"}),C&&e.jsx("div",{className:"alert alert-danger !py-2 !pt-3 !my-0 ml-2 !text-[12px]",role:"alert",children:S.subject}),D&&e.jsxs("div",{className:"alert alert-success !py-2 !pt-3 !my-0 ml-2 !text-[12px]",role:"alert",children:[a?"Edit ":"Add "," Succesful!"]})]})]})})]})}export{re as default};
