import{r as m,W as I,j as e,a as V,Y as W}from"./app-CeuI7o1v.js";import{S as L}from"./SingleCardWithHeader-BMhZjqrZ.js";import{L as _,c as H}from"./Layout-DdaQygP1.js";import{A as O}from"./AlertCard-FIcKZ8Wp.js";import{S as U}from"./SingleCardCenter-XpJrEUsc.js";import{T as n}from"./TextInput-ieMSKvMS.js";import{I as i}from"./InputLabel-CHSAiamn.js";import{O as z}from"./OverlapHeader-BWtahCKm.js";import{T as P}from"./Table-I2q6XCTQ.js";import{D as u}from"./Dropdown-D43rT-fp.js";import{F as Y}from"./ExclamationTriangleIcon-sqiL8OFG.js";import{F as q,a as B}from"./XMarkIcon-CvHw8P_x.js";import{F as G}from"./EllipsisVerticalIcon-d6u5R_8n.js";import{F as J,a as K}from"./PlusIcon-CIa4YNc-.js";import"./PageHeader-e0GRXsHZ.js";import"./MegaphoneIcon-BRvYTP08.js";import"./close-provider-Chx4oZVL.js";import"./transition-lxKP8sxk.js";import"./ChevronDownIcon-Bsu68qhy.js";import"./PageNav-DxT5GKtL.js";function be({auth:g,paginated:h}){const[l,c]=m.useState(0),[d,x]=m.useState(!1),[y,p]=m.useState(!1),o={id:"",date:"",start:"",end:"",activity:"",venue:"",designation:"",report:""},[N,j]=m.useState(o),{data:s,setData:r,post:C,patch:F,errors:a,hasErrors:M,processing:S,reset:f,recentlySuccessful:Q}=I(o),R=t=>{t.preventDefault(),d?(console.log(s.id),F(route("accomplishmentreports.update",s.id),{onSuccess:()=>f(),preserveScroll:!0})):(console.log(s),console.log("creating"),C(route("accomplishmentreports.store"),{onSuccess:()=>{f(),c(0)},preserveScroll:!0}),console.log(a))};return e.jsxs(_,{isAdmin:g.isAdmin,user:g.user,warning:y&&e.jsx("div",{className:"fixed w-full h-full z-[2] bg-black bg-opacity-50",onClick:()=>{p(!1)},children:e.jsx(O,{icon:e.jsx(Y,{className:"w-5 h-5"}),type:"alert-warning",title:"Warning",message:"Delete Report?",actions:e.jsxs(e.Fragment,{children:[e.jsx(V,{href:route("accomplishmentreports.destroy",N.id),method:"delete",as:"button",children:e.jsx(q,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{p(!1)},children:e.jsx(B,{className:"w-5 h-5"})})]})})}),children:[e.jsx(W,{title:"Accomplishment Reports"}),e.jsxs(z,{icon:e.jsx(H,{className:"w-9 h-9 text-gray-500"}),title:"Accomplishment Reports",subtitle:"View Accomplishment Reports",children:[e.jsx("div",{className:"relative text-gray-400 p-1 my-2",children:e.jsxs("div",{className:"absolute bottom-[110%] w-full flex flex-row gap-2 md:mb-1 lg:mb-2",children:[e.jsx("button",{onClick:()=>{c(0),x(!1),j(o),r(o)},className:`${l==0?"border-b-2 !text-white":""} p-2 `,children:"View"}),e.jsx("button",{onClick:()=>{c(1),x(!1),j(o),r(o)},className:`${l==1?"border-b-2 !text-white":""} p-2 `,children:"Create"}),l==2&&e.jsx("button",{className:"border-b-2 !text-white p-2 ",children:"Edit"})]})}),(()=>{if(l==0)return e.jsx(U,{bodyPadding:"p-4",table:e.jsx(P,{paginated:h,headersCount:9,headers:e.jsxs(e.Fragment,{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Start"}),e.jsx("th",{children:"End"}),e.jsx("th",{children:"Activity"}),e.jsx("th",{children:"Designation"}),e.jsx("th",{children:"Venue"}),e.jsx("th",{children:"Time Spent"}),e.jsx("th",{children:"Report"}),e.jsx("th",{children:"Actions"})]}),body:h.data.map((t,D)=>{let $=new Date(`${t.date} ${t.start}`),A=new Date(`${t.date} ${t.end}`),k=new Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",weekday:"short",hour:"2-digit",minute:"2-digit"}).format($),E=new Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",weekday:"short",hour:"2-digit",minute:"2-digit"}).format(A),[v,b,w]=k.split(", "),[X,Z,T]=E.split(", ");return console.log(v),console.log(b),console.log(w),e.jsxs("tr",{children:[e.jsx("td",{children:`${v} ${b}`}),e.jsx("td",{children:w}),e.jsx("td",{children:T}),e.jsx("td",{children:t.activity}),e.jsx("td",{children:t.designation}),e.jsx("td",{children:t.venue}),e.jsx("td",{children:t.timespent}),e.jsx("td",{children:t.report}),e.jsx("td",{children:e.jsxs(u,{children:[e.jsx(u.Trigger,{children:e.jsx("button",{className:"rounded-[50%] hover:bg-gray-200 p-1 mx-2 mt-2",type:"button",children:e.jsx(G,{className:"w-6 h-6 text-black"})})}),e.jsxs(u.Content,{position:D==h.data.length-1?"!bottom-0 right-[105%] !mr-14":"",contentClasses:"flex flex-col gap-2",margin:"mt-1",children:[e.jsx("button",{className:"hover:bg-green-50 ",onClick:()=>{x(!0),r(t),c(2)},children:"Edit"}),e.jsx("button",{className:"hover:bg-green-50 mx-1",onClick:()=>{j(t),p(!0)},children:"Delete"})]})]})})]},t.user_id)})})});if(l==1||l==2)return e.jsx(L,{header:d?"Edit Report":"Create Report",button:e.jsx("div",{className:"flex flex-row",children:e.jsx("div",{className:`rounded-[50%] h-10 w-10  flex place-content-center items-center mx-3 ${d?"bg-sky-700":"!bg-green-700"}  `,children:d?e.jsx(J,{className:"h-5 w-5  !text-white "}):e.jsx(K,{className:"h-7 w-7 !text-white"})})}),body:e.jsxs("form",{className:"p-3",onSubmit:R,children:[e.jsxs("div",{className:"flex flex-row gap-6",children:[e.jsxs("div",{className:"w-1/3 flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"Date",children:"Date"}),e.jsx(n,{className:"form-control",type:"date",value:s.date,onChange:t=>{r("date",t.target.value)}})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"Start",children:"Start"}),e.jsx(n,{className:"form-control",type:"time",value:s.start,onChange:t=>{r("start",t.target.value)}}),a.start]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"End",children:"End"}),e.jsx(n,{className:"form-control",type:"time",value:s.end,onChange:t=>{r("end",t.target.value)}}),a.end]})]}),e.jsxs("div",{className:"w-2/3 flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"Activity",children:"Activity"}),e.jsx(n,{className:"form-control",type:"text",value:s.activity,onChange:t=>{r("activity",t.target.value)}}),a.activity]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"Venue",children:"Venue"}),e.jsx(n,{className:"form-control",type:"text",value:s.venue,onChange:t=>{r("venue",t.target.value)}}),a.venue]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"Designation",children:"Designation"}),e.jsx(n,{className:"form-control",type:"text",value:s.designation,onChange:t=>{r("designation",t.target.value)}}),a.designation]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"Report",children:"Report"}),e.jsx(n,{className:"form-control",type:"text",value:s.report,onChange:t=>{r("report",t.target.value)}}),a.report]})]})]}),e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:S,children:d?"Edit":"Add"})]})})})()]})]})}export{be as default};
